(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Yv9t:function(t,n,l){"use strict";l.r(n);var e=l("CcnG"),u=function(){return function(){}}(),r=l("pMnS"),i=l("GFsM"),s=l("vAZj"),a=l("A7o+"),o=l("Ip0R"),c=l("ImLw"),d=l("HyEY"),p=l("+WIb"),f=l("Vurf"),m=function(){function t(t,n,l,e,u,r){this.$api=t,this.$ws=n,this.$auth=l,this.$toastr=e,this.translate=u,this.$router=r,this.io=this.$ws.connectToNamespace("status"),this.resp={},this.timeout=!1,this.error=!1}return t.prototype.ngOnInit=function(){var t=this;this.io.connected.subscribe(function(){t.io.socket.emit("monitor-server-status"),t.$auth.getAppSettings().catch()}),this.$api.put("/platform-tools/linux/restart-host",{}).subscribe(function(n){t.resp=n,t.checkIfServerUp()},function(n){t.error=t.translate.instant("platform.linux.restart.toast_server_restart_error"),t.$toastr.error(t.error+": "+n.message,t.translate.instant("toast.title_error"))})},t.prototype.checkIfServerUp=function(){var t=this;this.checkDelay=c.a.create(3e4).subscribe(function(){t.io.socket.on("homebridge-status",function(n){"up"===n.status&&(t.$toastr.success(t.translate.instant("platform.linux.restart.toast_server_restarted"),t.translate.instant("toast.title_success")),t.$router.navigate(["/"]))})}),this.checkTimeout=c.a.create(12e4).subscribe(function(){t.$toastr.warning(t.translate.instant("platform.linux.restart.toast_server_taking_long_time_to_come_online"),t.translate.instant("toast.title_warning"),{timeOut:1e4}),t.timeout=!0})},t.prototype.ngOnDestroy=function(){this.io.end(),this.checkDelay&&this.checkDelay.unsubscribe(),this.checkTimeout&&this.checkTimeout.unsubscribe()},t}(),h=l("SZbH"),g=l("ZYCi"),v=e["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function _(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,1,"app-spinner",[],null,null,null,i.b,i.a)),e["\u0275did"](1,114688,null,0,s.a,[],null,null)],function(t,n){t(n,1,0)},null)}function w(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),e["\u0275did"](1,8536064,null,0,a.e,[a.l,e.ElementRef,e.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),e["\u0275ted"](-1,null,["Please wait, this page will automatically redirect when the Homebridge is back online."]))],function(t,n){t(n,1,0,"platform.linux.restart.message_please_wait_while_server_restarts")},null)}function b(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,1,"p",[["class","grey-text"]],null,null,null,null,null)),(t()(),e["\u0275ted"](1,null,["",""]))],null,function(t,n){t(n,1,0,n.component.error)})}function y(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),e["\u0275eld"](1,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),e["\u0275did"](2,8536064,null,0,a.e,[a.l,e.ElementRef,e.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),e["\u0275ted"](-1,null,["Server restart is taking a long time. You may need to bring up the server back up manually."]))],function(t,n){t(n,2,0,"platform.linux.restart.message_server_taking_long_time_to_restart")},null)}function k(t){return e["\u0275vid"](0,[(t()(),e["\u0275and"](16777216,null,null,1,null,_)),e["\u0275did"](1,16384,null,0,o.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),e["\u0275eld"](2,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(t()(),e["\u0275eld"](3,0,null,null,9,"div",[["class","col-md-12 text-center"]],null,null,null,null,null)),(t()(),e["\u0275eld"](4,0,null,null,2,"h3",[["class","primary-text"]],null,null,null,null,null)),e["\u0275did"](5,8536064,null,0,a.e,[a.l,e.ElementRef,e.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),e["\u0275ted"](-1,null,["Restarting Server"])),(t()(),e["\u0275and"](16777216,null,null,1,null,w)),e["\u0275did"](8,16384,null,0,o.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),e["\u0275and"](16777216,null,null,1,null,b)),e["\u0275did"](10,16384,null,0,o.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),e["\u0275and"](16777216,null,null,1,null,y)),e["\u0275did"](12,16384,null,0,o.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,n){var l=n.component;t(n,1,0,!l.error),t(n,5,0,"platform.linux.restart.title_restarting_server"),t(n,8,0,!l.timeout&&!l.error),t(n,10,0,l.error),t(n,12,0,l.timeout)},null)}function I(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,1,"app-restart-linux",[],null,null,null,k,v)),e["\u0275did"](1,245760,null,0,m,[d.a,p.a,f.a,h.j,a.l,g.l],null,null)],function(t,n){t(n,1,0)},null)}var R=e["\u0275ccf"]("app-restart-linux",m,I,{},{},[]),x=function(){function t(t,n,l,e,u,r){this.$api=t,this.$ws=n,this.$auth=l,this.$toastr=e,this.translate=u,this.$router=r,this.io=this.$ws.connectToNamespace("status"),this.resp={},this.timeout=!1,this.error=!1}return t.prototype.ngOnInit=function(){var t=this;this.io.connected.subscribe(function(){t.io.socket.emit("monitor-server-status"),t.$auth.getAppSettings().catch()}),this.$api.put("/platform-tools/linux/shutdown-host",{}).subscribe(function(n){t.resp=n,t.checkIfServerUp()},function(n){t.error=t.translate.instant("platform.linux.restart.toast_server_restart_error"),t.$toastr.error(t.error+": "+n.message,t.translate.instant("toast.title_error"))})},t.prototype.checkIfServerUp=function(){var t=this;this.checkDelay=c.a.create(3e4).subscribe(function(){t.io.socket.on("homebridge-status",function(n){"up"===n.status&&(t.$toastr.success(t.translate.instant("platform.linux.restart.toast_server_restarted"),t.translate.instant("toast.title_success")),t.$router.navigate(["/"]))})}),this.checkTimeout=c.a.create(12e4).subscribe(function(){t.$toastr.warning(t.translate.instant("platform.linux.restart.toast_server_taking_long_time_to_come_online"),t.translate.instant("toast.title_warning"),{timeOut:1e4}),t.timeout=!0})},t.prototype.ngOnDestroy=function(){this.io.end(),this.checkDelay&&this.checkDelay.unsubscribe(),this.checkTimeout&&this.checkTimeout.unsubscribe()},t}(),$=e["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function C(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),e["\u0275did"](1,8536064,null,0,a.e,[a.l,e.ElementRef,e.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),e["\u0275ted"](-1,null,["The server will power down shortly."]))],function(t,n){t(n,1,0,"platform.linux.shutdown.message_server_will_power_down")},null)}function T(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,1,"p",[["class","grey-text"]],null,null,null,null,null)),(t()(),e["\u0275ted"](1,null,["",""]))],null,function(t,n){t(n,1,0,n.component.error)})}function D(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(t()(),e["\u0275eld"](1,0,null,null,7,"div",[["class","col-md-12 text-center"]],null,null,null,null,null)),(t()(),e["\u0275eld"](2,0,null,null,2,"h3",[["class","primary-text"]],null,null,null,null,null)),e["\u0275did"](3,8536064,null,0,a.e,[a.l,e.ElementRef,e.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),e["\u0275ted"](-1,null,["Shutting Down Server "])),(t()(),e["\u0275and"](16777216,null,null,1,null,C)),e["\u0275did"](6,16384,null,0,o.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),e["\u0275and"](16777216,null,null,1,null,T)),e["\u0275did"](8,16384,null,0,o.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,n){var l=n.component;t(n,3,0,"platform.linux.shutdown.title_shutting_down_server"),t(n,6,0,!l.timeout&&!l.error),t(n,8,0,l.error)},null)}function N(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,1,"app-shutdown-linux",[],null,null,null,D,$)),e["\u0275did"](1,245760,null,0,x,[d.a,p.a,f.a,h.j,a.l,g.l],null,null)],function(t,n){t(n,1,0)},null)}var S=e["\u0275ccf"]("app-shutdown-linux",x,N,{},{},[]),L=l("pKmL"),E=function(){return function(){}}();l.d(n,"LinuxModuleNgFactory",function(){return M});var M=e["\u0275cmf"](u,[],function(t){return e["\u0275mod"]([e["\u0275mpd"](512,e.ComponentFactoryResolver,e["\u0275CodegenComponentFactoryResolver"],[[8,[r.a,R,S]],[3,e.ComponentFactoryResolver],e.NgModuleRef]),e["\u0275mpd"](4608,o.NgLocalization,o.NgLocaleLocalization,[e.LOCALE_ID,[2,o["\u0275angular_packages_common_common_a"]]]),e["\u0275mpd"](4608,a.h,a.g,[]),e["\u0275mpd"](4608,a.c,a.f,[]),e["\u0275mpd"](4608,a.j,a.d,[]),e["\u0275mpd"](4608,a.b,a.a,[]),e["\u0275mpd"](4608,a.l,a.l,[a.m,a.h,a.c,a.j,a.b,a.n,a.o]),e["\u0275mpd"](1073742336,o.CommonModule,o.CommonModule,[]),e["\u0275mpd"](1073742336,a.i,a.i,[]),e["\u0275mpd"](1073742336,L.a,L.a,[]),e["\u0275mpd"](1073742336,g.p,g.p,[[2,g.v],[2,g.l]]),e["\u0275mpd"](1073742336,E,E,[]),e["\u0275mpd"](1073742336,u,u,[]),e["\u0275mpd"](1024,g.j,function(){return[[{path:"",redirectTo:"/",pathMatch:"full"},{path:"restart-server",component:m},{path:"shutdown-server",component:x}]]},[]),e["\u0275mpd"](256,a.o,void 0,[]),e["\u0275mpd"](256,a.n,void 0,[])])})}}]);