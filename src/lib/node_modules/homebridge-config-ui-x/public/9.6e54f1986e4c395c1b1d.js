(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{RG6s:function(n,e){ace.define("ace/mode/sh_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(n,e,t){"use strict";var l=n("../lib/oop"),r=n("./text_highlight_rules").TextHighlightRules,o=e.reservedKeywords="!|{|}|case|do|done|elif|else|esac|fi|for|if|in|then|until|while|&|;|export|local|read|typeset|unset|elif|select|set|function|declare|readonly",u=e.languageConstructs="[|]|alias|bg|bind|break|builtin|cd|command|compgen|complete|continue|dirs|disown|echo|enable|eval|exec|exit|fc|fg|getopts|hash|help|history|jobs|kill|let|logout|popd|printf|pushd|pwd|return|set|shift|shopt|source|suspend|test|times|trap|type|ulimit|umask|unalias|wait",a=function(){var n=this.createKeywordMapper({keyword:o,"support.function.builtin":u,"invalid.deprecated":"debugger"},"identifier");this.$rules={start:[{token:"constant",regex:/\\./},{token:["text","comment"],regex:/(^|\s)(#.*)$/},{token:"string.start",regex:'"',push:[{token:"constant.language.escape",regex:/\\(?:[$`"\\]|$)/},{include:"variables"},{token:"keyword.operator",regex:/`/},{token:"string.end",regex:'"',next:"pop"},{defaultToken:"string"}]},{token:"string",regex:"\\$'",push:[{token:"constant.language.escape",regex:/\\(?:[abeEfnrtv\\'"]|x[a-fA-F\d]{1,2}|u[a-fA-F\d]{4}([a-fA-F\d]{4})?|c.|\d{1,3})/},{token:"string",regex:"'",next:"pop"},{defaultToken:"string"}]},{regex:"<<<",token:"keyword.operator"},{stateName:"heredoc",regex:"(<<-?)(\\s*)(['\"`]?)([\\w\\-]+)(['\"`]?)",onMatch:function(n,e,t){var l="-"==n[2]?"indentedHeredoc":"heredoc",r=n.split(this.splitRegex);return t.push(l,r[4]),[{type:"constant",value:r[1]},{type:"text",value:r[2]},{type:"string",value:r[3]},{type:"support.class",value:r[4]},{type:"string",value:r[5]}]},rules:{heredoc:[{onMatch:function(n,e,t){return n===t[1]?(t.shift(),t.shift(),this.next=t[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^\t+"},{onMatch:function(n,e,t){return n===t[1]?(t.shift(),t.shift(),this.next=t[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(n,e){return"heredoc"===e[0]||"indentedHeredoc"===e[0]?e[0]:n}},{token:["keyword","text","text","text","variable"],regex:/(declare|local|readonly)(\s+)(?:(-[fixar]+)(\s+))?([a-zA-Z_][a-zA-Z0-9_]*\b)/},{token:"variable.language",regex:"(?:\\$(?:SHLVL|\\$|\\!|\\?))"},{token:"variable",regex:"(?:[a-zA-Z_][a-zA-Z0-9_]*(?==))"},{include:"variables"},{token:"support.function",regex:"(?:[a-zA-Z_][a-zA-Z0-9_]*\\s*\\(\\))"},{token:"support.function",regex:"(?:&(?:\\d+))"},{token:"string",start:"'",end:"'"},{token:"constant.numeric",regex:"(?:(?:(?:(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.))|(?:\\d+)))|(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.)))"},{token:"constant.numeric",regex:"(?:(?:[1-9]\\d*)|(?:0))\\b"},{token:n,regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|~|<|>|<=|=>|=|!=|[%&|`]"},{token:"punctuation.operator",regex:";"},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]]"},{token:"paren.rparen",regex:"[\\)\\}]",next:"pop"}],variables:[{token:"variable",regex:/(\$)(\w+)/},{token:["variable","paren.lparen"],regex:/(\$)(\()/,push:"start"},{token:["variable","paren.lparen","keyword.operator","variable","keyword.operator"],regex:/(\$)(\{)([#!]?)(\w+|[*@#?\-$!0_])(:[?+\-=]?|##?|%%?|,,?\/|\^\^?)?/,push:"start"},{token:"variable",regex:/\$[*@#?\-$!0_]/},{token:["variable","paren.lparen"],regex:/(\$)(\{)/,push:"start"}]},this.normalizeRules()};l.inherits(a,r),e.ShHighlightRules=a}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(n,e,t){"use strict";var l=n("../../lib/oop"),r=n("../../range").Range,o=n("./fold_mode").FoldMode,u=e.FoldMode=function(n){n&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+n.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+n.end)))};l.inherits(u,o),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(n,e,t){var l=n.getLine(t);if(this.singleLineBlockCommentRe.test(l)&&!this.startRegionRe.test(l)&&!this.tripleStarBlockCommentRe.test(l))return"";var r=this._getFoldWidgetBase(n,e,t);return!r&&this.startRegionRe.test(l)?"start":r},this.getFoldWidgetRange=function(n,e,t,l){var r,o=n.getLine(t);if(this.startRegionRe.test(o))return this.getCommentRegionBlock(n,o,t);if(r=o.match(this.foldingStartMarker)){var u=r.index;if(r[1])return this.openingBracketBlock(n,r[1],t,u);var a=n.getCommentFoldRange(t,u+r[0].length,1);return a&&!a.isMultiLine()&&(l?a=this.getSectionRange(n,t):"all"!=e&&(a=null)),a}return"markbegin"!==e&&(r=o.match(this.foldingStopMarker))?(u=r.index+r[0].length,r[1]?this.closingBracketBlock(n,r[1],t,u):n.getCommentFoldRange(t,u,-1)):void 0},this.getSectionRange=function(n,e){for(var t=n.getLine(e),l=t.search(/\S/),o=e,u=t.length,a=e+=1,i=n.getLength();++e<i;){var s=(t=n.getLine(e)).search(/\S/);if(-1!==s){if(l>s)break;var c=this.getFoldWidgetRange(n,"all",e);if(c){if(c.start.row<=o)break;if(c.isMultiLine())e=c.end.row;else if(l==s)break}a=e}}return new r(o,u,a,n.getLine(a).length)},this.getCommentRegionBlock=function(n,e,t){for(var l=e.search(/\s*$/),o=n.getLength(),u=t,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,i=1;++t<o;){e=n.getLine(t);var s=a.exec(e);if(s&&(s[1]?i--:i++,!i))break}if(t>u)return new r(u,l,t,e.length)}}).call(u.prototype)}),ace.define("ace/mode/sh",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sh_highlight_rules","ace/range","ace/mode/folding/cstyle","ace/mode/behaviour/cstyle"],function(n,e,t){"use strict";var l=n("../lib/oop"),r=n("./text").Mode,o=n("./sh_highlight_rules").ShHighlightRules,u=n("../range").Range,a=n("./folding/cstyle").FoldMode,i=n("./behaviour/cstyle").CstyleBehaviour,s=function(){this.HighlightRules=o,this.foldingRules=new a,this.$behaviour=new i};l.inherits(s,r),(function(){this.lineCommentStart="#",this.getNextLineIndent=function(n,e,t){var l=this.$getIndent(e),r=this.getTokenizer().getLineTokens(e,n).tokens;return r.length&&"comment"==r[r.length-1].type?l:("start"==n&&e.match(/^.*[\{\(\[:]\s*$/)&&(l+=t),l)};var n={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(e,t,l){if("\r\n"!==l&&"\r"!==l&&"\n"!==l)return!1;var r=this.getTokenizer().getLineTokens(t.trim(),e).tokens;if(!r)return!1;do{var o=r.pop()}while(o&&("comment"==o.type||"text"==o.type&&o.value.match(/^\s+$/)));return!!o&&"keyword"==o.type&&n[o.value]},this.autoOutdent=function(n,e,t){var l=this.$getIndent(e.getLine(t+=1)),r=e.getTabString();l.slice(-r.length)==r&&e.remove(new u(t,l.length-r.length,t,l.length))},this.$id="ace/mode/sh"}).call(s.prototype),e.Mode=s})},xs27:function(n,e,t){"use strict";t.r(e);var l=t("CcnG"),r=function(){return function(){}}(),o=t("9AJC"),u=t("pMnS"),a=t("A7o+"),i=t("ZYCi"),s=t("Ip0R"),c=t("gIcY"),d=t("Vurf"),p=t("HyEY"),g=function(){function n(n,e,t,l,r,o){this.$auth=n,this.$api=e,this.$fb=t,this.$toastr=l,this.$route=r,this.translate=o}return n.prototype.ngOnInit=function(){var n=this;this.form=this.$fb.group({HOMEBRIDGE_DEBUG:[!1],HOMEBRIDGE_INSECURE:[!1]}),this.$route.data.subscribe(function(e){n.env=e.env,n.form.patchValue(n.env)}),this.form.valueChanges.subscribe(this.saveSettings.bind(this))},n.prototype.saveSettings=function(n){var e=this;void 0===n&&(n=this.form.value),this.$api.put("/platform-tools/docker/env",n).subscribe(function(){e.$toastr.success(e.translate.instant("platform.docker.settings.toast_container_restart_required"),e.translate.instant("platform.docker.settings.toast_title_settings_saved"))})},n}(),h=t("SZbH"),m=l["\u0275crt"]({encapsulation:0,styles:[[".material-switch[_ngcontent-%COMP%] > input[type=checkbox][_ngcontent-%COMP%]{display:none}.material-switch[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{cursor:pointer;height:0;position:relative;width:40px}.material-switch[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]::before{background:#000;box-shadow:inset 0 0 10px rgba(0,0,0,.5);border-radius:8px;content:'';height:16px;margin-top:-8px;position:absolute;opacity:.3;transition:all .4s ease-in-out;width:40px}.material-switch[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]::after{background:#fff;border-radius:16px;box-shadow:0 0 5px rgba(0,0,0,.3);content:'';height:24px;left:-4px;margin-top:-8px;position:absolute;top:-4px;transition:all .3s ease-in-out;width:24px}.material-switch[_ngcontent-%COMP%] > input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]::before{background:inherit;opacity:.5}.material-switch[_ngcontent-%COMP%] > input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]::after{background:inherit;left:20px}"]],data:{}});function f(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,3,"button",[["class","btn btn-primary waves-effect m-0"],["routerLink","/platform-tools/docker/restart-container"]],null,[[null,"click"]],function(n,e,t){var r=!0;return"click"===e&&(r=!1!==l["\u0275nov"](n,2).onClick()&&r),r},null,null)),l["\u0275did"](1,8536064,null,0,a.e,[a.l,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),l["\u0275did"](2,16384,null,0,i.m,[i.l,i.a,[8,null],l.Renderer2,l.ElementRef],{routerLink:[0,"routerLink"]},null),(n()(),l["\u0275ted"](-1,null,["Restart Required"]))],function(n,e){n(e,1,0,"platform.docker.settings.button_restart_required"),n(e,2,0,"/platform-tools/docker/restart-container")},null)}function v(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","alert alert-danger"],["role","alert"]],null,null,null,null,null)),(n()(),l["\u0275ted"](1,null,[" "," "])),l["\u0275pid"](131072,a.k,[a.l,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](3,0,null,null,1,"a",[["href","https://github.com/oznu/docker-homebridge"],["rel","noopener noreferrer"],["target","_blank"]],null,null,null,null,null)),(n()(),l["\u0275ted"](-1,null,["https://github.com/oznu/docker-homebridge"]))],null,function(n,e){n(e,1,0,l["\u0275unv"](e,1,0,l["\u0275nov"](e,2).transform("platform.docker.settings.message_image_upgrade_required")))})}function k(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","d-flex justify-content-between"]],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,2,"h3",[["class","primary-text m-0"]],null,null,null,null,null)),l["\u0275did"](2,8536064,null,0,a.e,[a.l,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,["Settings"])),(n()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","text-right"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,f)),l["\u0275did"](6,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275eld"](7,0,null,null,6,"div",[["class","row mt-3"]],null,null,null,null,null)),(n()(),l["\u0275eld"](8,0,null,null,5,"div",[["class","col-md-12"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,v)),l["\u0275did"](10,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275eld"](11,0,null,null,2,"div",[["class","alert alert-warning"],["role","alert"]],null,null,null,null,null)),l["\u0275did"](12,8536064,null,0,a.e,[a.l,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,[" Changing these values will override the corresponding environment variables you may have set with the docker run command. "])),(n()(),l["\u0275eld"](14,0,null,null,27,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,e,t){var r=!0;return"submit"===e&&(r=!1!==l["\u0275nov"](n,16).onSubmit(t)&&r),"reset"===e&&(r=!1!==l["\u0275nov"](n,16).onReset()&&r),r},null,null)),l["\u0275did"](15,16384,null,0,c["\u0275angular_packages_forms_forms_bh"],[],null,null),l["\u0275did"](16,540672,null,0,c.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),l["\u0275prd"](2048,null,c.ControlContainer,null,[c.FormGroupDirective]),l["\u0275did"](18,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(n()(),l["\u0275eld"](19,0,null,null,1,"h5",[["class","primary-text"]],null,null,null,null,null)),(n()(),l["\u0275ted"](-1,null,["Homebridge"])),(n()(),l["\u0275eld"](21,0,null,null,20,"ul",[["class","list-group"]],null,null,null,null,null)),(n()(),l["\u0275eld"](22,0,null,null,9,"li",[["class","list-group-item d-flex justify-content-between align-items-center"]],null,null,null,null,null)),(n()(),l["\u0275ted"](-1,null,[" Homebridge Debug Mode "])),(n()(),l["\u0275eld"](24,0,null,null,7,"div",[["class","material-switch pull-right"]],null,null,null,null,null)),(n()(),l["\u0275eld"](25,0,null,null,5,"input",[["formControlName","HOMEBRIDGE_DEBUG"],["id","homebridgeDebugMode"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(n,e,t){var r=!0;return"change"===e&&(r=!1!==l["\u0275nov"](n,26).onChange(t.target.checked)&&r),"blur"===e&&(r=!1!==l["\u0275nov"](n,26).onTouched()&&r),r},null,null)),l["\u0275did"](26,16384,null,0,c.CheckboxControlValueAccessor,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,c.NG_VALUE_ACCESSOR,function(n){return[n]},[c.CheckboxControlValueAccessor]),l["\u0275did"](28,671744,null,0,c.FormControlName,[[3,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR],[2,c["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),l["\u0275prd"](2048,null,c.NgControl,null,[c.FormControlName]),l["\u0275did"](30,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(n()(),l["\u0275eld"](31,0,null,null,0,"label",[["class","badge-primary"],["for","homebridgeDebugMode"]],null,null,null,null,null)),(n()(),l["\u0275eld"](32,0,null,null,9,"li",[["class","list-group-item d-flex justify-content-between align-items-center"]],null,null,null,null,null)),(n()(),l["\u0275ted"](-1,null,[" Homebridge Insecure Mode "])),(n()(),l["\u0275eld"](34,0,null,null,7,"div",[["class","material-switch pull-right"]],null,null,null,null,null)),(n()(),l["\u0275eld"](35,0,null,null,5,"input",[["formControlName","HOMEBRIDGE_INSECURE"],["id","homebridgeInsecureMode"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(n,e,t){var r=!0;return"change"===e&&(r=!1!==l["\u0275nov"](n,36).onChange(t.target.checked)&&r),"blur"===e&&(r=!1!==l["\u0275nov"](n,36).onTouched()&&r),r},null,null)),l["\u0275did"](36,16384,null,0,c.CheckboxControlValueAccessor,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,c.NG_VALUE_ACCESSOR,function(n){return[n]},[c.CheckboxControlValueAccessor]),l["\u0275did"](38,671744,null,0,c.FormControlName,[[3,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR],[2,c["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),l["\u0275prd"](2048,null,c.NgControl,null,[c.FormControlName]),l["\u0275did"](40,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(n()(),l["\u0275eld"](41,0,null,null,0,"label",[["class","badge-primary"],["for","homebridgeInsecureMode"]],null,null,null,null,null))],function(n,e){var t=e.component;n(e,2,0,"platform.docker.settings.title_settings"),n(e,6,0,t.form.dirty),n(e,10,0,!t.$auth.env.ableToConfigureSelf),n(e,12,0,"platform.docker.settings.message_env_warning"),n(e,16,0,t.form),n(e,28,0,"HOMEBRIDGE_DEBUG"),n(e,38,0,"HOMEBRIDGE_INSECURE")},function(n,e){n(e,14,0,l["\u0275nov"](e,18).ngClassUntouched,l["\u0275nov"](e,18).ngClassTouched,l["\u0275nov"](e,18).ngClassPristine,l["\u0275nov"](e,18).ngClassDirty,l["\u0275nov"](e,18).ngClassValid,l["\u0275nov"](e,18).ngClassInvalid,l["\u0275nov"](e,18).ngClassPending),n(e,25,0,l["\u0275nov"](e,30).ngClassUntouched,l["\u0275nov"](e,30).ngClassTouched,l["\u0275nov"](e,30).ngClassPristine,l["\u0275nov"](e,30).ngClassDirty,l["\u0275nov"](e,30).ngClassValid,l["\u0275nov"](e,30).ngClassInvalid,l["\u0275nov"](e,30).ngClassPending),n(e,35,0,l["\u0275nov"](e,40).ngClassUntouched,l["\u0275nov"](e,40).ngClassTouched,l["\u0275nov"](e,40).ngClassPristine,l["\u0275nov"](e,40).ngClassDirty,l["\u0275nov"](e,40).ngClassValid,l["\u0275nov"](e,40).ngClassInvalid,l["\u0275nov"](e,40).ngClassPending)})}function b(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"app-container-settings",[],null,null,null,k,m)),l["\u0275did"](1,114688,null,0,g,[d.a,p.a,c.FormBuilder,h.j,i.a,a.l],null,null)],function(n,e){n(e,1,0)},null)}var _=l["\u0275ccf"]("app-container-settings",g,b,{},{},[]),C=t("gakQ"),x=t("BXrY"),y=(t("tag3"),t("RG6s"),t("rVO2")),R=function(){function n(n,e,t,l,r){this.$api=n,this.$md=e,this.$toastr=t,this.translate=l,this.$route=r,this.options={printMargin:!1},e.detect.phone()&&(this.options.showGutter=!1),e.detect.mobile()&&(this.options.fontSize="16px")}return n.prototype.ngOnInit=function(){var n=this;this.$route.data.subscribe(function(e){n.startupScript=e.startupScript.script})},n.prototype.onSave=function(){var n=this;if("#!/bin/sh"!==this.startupScript.split("\n")[0].trim())return this.$toastr.error(this.translate.instant("platform.docker.startup_script.toast_script_must_use_hashbang"),this.translate.instant("platform.docker.startup_script.toast_title_script_error")),void(this.startupScript="#!/bin/sh\n\n"+this.startupScript);this.$api.put("/platform-tools/docker/startup-script",{script:this.startupScript}).subscribe(function(e){return n.$toastr.success(n.translate.instant("platform.docker.startup_script.toast_restart_required"),n.translate.instant("platform.docker.startup_script.toast_title_script_saved"))},function(e){return n.$toastr.error(e.message,n.translate.instant("toast.title_error"))})},n}(),w=l["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function $(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,18,"div",[["class","flex-column d-flex align-items-stretch h-100"]],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(n()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","col-sm-8 d-none d-sm-block"]],null,null,null,null,null)),(n()(),l["\u0275eld"](3,0,null,null,3,"h3",[["class","primary-text m-0"]],null,null,null,null,null)),(n()(),l["\u0275eld"](4,0,null,null,1,"span",[["class","d-none d-md-inline"]],null,null,null,null,null)),(n()(),l["\u0275ted"](-1,null,["Docker Container"])),(n()(),l["\u0275ted"](-1,null,[" startup.sh"])),(n()(),l["\u0275eld"](7,0,null,null,3,"div",[["class","col-sm-4 text-right"]],null,null,null,null,null)),(n()(),l["\u0275eld"](8,0,null,null,2,"button",[["class","btn btn-primary waves-effect m-0"]],null,[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.onSave()&&l),l},null,null)),l["\u0275did"](9,8536064,null,0,a.e,[a.l,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,["Save"])),(n()(),l["\u0275eld"](11,0,null,null,4,"div",[["class","row mt-3"]],null,null,null,null,null)),(n()(),l["\u0275eld"](12,0,null,null,3,"div",[["class","col-md-12"]],null,null,null,null,null)),(n()(),l["\u0275eld"](13,0,null,null,2,"div",[["class","alert alert-warning"],["role","alert"]],null,null,null,null,null)),l["\u0275did"](14,8536064,null,0,a.e,[a.l,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,[" This script will be executed each time the docker container starts. You can use this to install any extra packages your plugins may need such as ffmpeg or libpcap-dev. "])),(n()(),l["\u0275eld"](16,0,null,null,2,"ace-editor",[["class","hb-ace-text-editor align-self-end h-100 mb-3 mt-3"],["mode","sh"],["theme","xcode"]],null,[[null,"textChange"],[null,"keydown.meta.s"],[null,"keydown.control.s"]],function(n,e,t){var l=!0,r=n.component;return"textChange"===e&&(l=!1!==(r.startupScript=t)&&l),"keydown.meta.s"===e&&(t.preventDefault(),l=!1!==r.onSave()&&l),"keydown.control.s"===e&&(t.preventDefault(),l=!1!==r.onSave()&&l),l},C.b,C.a)),l["\u0275prd"](5120,null,c.NG_VALUE_ACCESSOR,function(n){return[n]},[x.a]),l["\u0275did"](18,245760,null,0,x.a,[l.ElementRef,l.NgZone],{options:[0,"options"],readOnly:[1,"readOnly"],theme:[2,"theme"],mode:[3,"mode"],text:[4,"text"],autoUpdateContent:[5,"autoUpdateContent"]},{textChange:"textChange"})],function(n,e){var t=e.component;n(e,9,0,"form.button_save"),n(e,14,0,"platform.docker.startup_script.message_script_help"),n(e,18,0,t.options,!1,"xcode","sh",t.startupScript,!0)},null)}function S(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"app-startup-script",[],null,null,null,$,w)),l["\u0275did"](1,114688,null,0,R,[p.a,y.a,h.j,a.l,i.a],null,null)],function(n,e){n(e,1,0)},null)}var M=l["\u0275ccf"]("app-startup-script",R,S,{},{},[]),E=t("GFsM"),I=t("vAZj"),D=t("ImLw"),O=t("+WIb"),L=function(){function n(n,e,t,l,r,o){this.$api=n,this.$ws=e,this.$auth=t,this.$toastr=l,this.translate=r,this.$router=o,this.io=this.$ws.connectToNamespace("status"),this.resp={},this.timeout=!1,this.error=!1}return n.prototype.ngOnInit=function(){var n=this;this.io.connected.subscribe(function(){n.io.socket.emit("monitor-server-status"),n.$auth.getAppSettings().catch()}),this.$api.put("/platform-tools/docker/restart-container",{}).subscribe(function(e){n.resp=e,n.checkIfServerUp()},function(e){var t=n.translate.instant("restart.toast_server_restart_error");n.error=t+".",n.$toastr.error(t+": "+e.message,n.translate.instant("toast.title_error"))})},n.prototype.checkIfServerUp=function(){var n=this;this.checkDelay=D.a.create(1e4).subscribe(function(){n.io.socket.on("homebridge-status",function(e){"up"===e.status&&(n.$toastr.success(n.translate.instant("platform.docker.restart_container.toast_container_restarted"),n.translate.instant("toast.title_success")),n.$router.navigate(["/"]))})}),this.checkTimeout=D.a.create(6e4).subscribe(function(){n.$toastr.warning(n.translate.instant("restart.toast_sever_restart_timeout"),n.translate.instant("toast.title_warning"),{timeOut:1e4}),n.timeout=!0})},n.prototype.ngOnDestroy=function(){this.io.end(),this.checkDelay&&this.checkDelay.unsubscribe(),this.checkTimeout&&this.checkTimeout.unsubscribe()},n}(),F=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function N(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"app-spinner",[],null,null,null,E.b,E.a)),l["\u0275did"](1,114688,null,0,I.a,[],null,null)],function(n,e){n(e,1,0)},null)}function A(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),l["\u0275did"](1,8536064,null,0,a.e,[a.l,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,[" Please wait, this page will automatically redirect when the Homebridge is back online."]))],function(n,e){n(e,1,0,"restart.message_please_wait_while_server_restarts")},null)}function B(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"p",[["class","grey-text"]],null,null,null,null,null)),(n()(),l["\u0275ted"](1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.error)})}function T(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,8,"div",[],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),l["\u0275did"](2,8536064,null,0,a.e,[a.l,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,[" Server restart is taking a long time. You may need to bring up the Docker container manually."])),(n()(),l["\u0275eld"](4,0,null,null,4,"p",[["class","primary-text"]],[[8,"innerHTML",1]],null,null,null,null)),l["\u0275pid"](131072,a.k,[a.l,l.ChangeDetectorRef]),(n()(),l["\u0275ted"](-1,null,["Make sure you're running the Docker container with "])),(n()(),l["\u0275eld"](7,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),l["\u0275ted"](-1,null,["--restart=always"]))],function(n,e){n(e,2,0,"platform.docker.restart_container.message_server_taking_long_time_to_restart")},function(n,e){n(e,4,0,l["\u0275unv"](e,4,0,l["\u0275nov"](e,5).transform("platform.docker.restart_container.message_run_with_restart_always")))})}function G(n){return l["\u0275vid"](0,[(n()(),l["\u0275and"](16777216,null,null,1,null,N)),l["\u0275did"](1,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275eld"](2,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(n()(),l["\u0275eld"](3,0,null,null,11,"div",[["class","col-md-12 text-center"]],null,null,null,null,null)),(n()(),l["\u0275eld"](4,0,null,null,1,"h1",[["class","primary-text"]],null,null,null,null,null)),(n()(),l["\u0275eld"](5,0,null,null,0,"i",[["class","fab fa-docker"]],null,null,null,null,null)),(n()(),l["\u0275eld"](6,0,null,null,2,"h3",[["class","primary-text"]],null,null,null,null,null)),l["\u0275did"](7,8536064,null,0,a.e,[a.l,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,["Restarting Docker Container"])),(n()(),l["\u0275and"](16777216,null,null,1,null,A)),l["\u0275did"](10,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,B)),l["\u0275did"](12,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,T)),l["\u0275did"](14,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var t=e.component;n(e,1,0,!t.error),n(e,7,0,"platform.docker.restart_container.title_restarting"),n(e,10,0,!t.timeout&&!t.error),n(e,12,0,t.error),n(e,14,0,t.timeout)},null)}function V(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"app-container-restart",[],null,null,null,G,F)),l["\u0275did"](1,245760,null,0,L,[p.a,O.a,d.a,h.j,a.l,i.l],null,null)],function(n,e){n(e,1,0)},null)}var P=l["\u0275ccf"]("app-container-restart",L,V,{},{},[]),H=t("4GxJ"),U=function(){function n(n,e,t){this.$api=n,this.$toastr=e,this.$router=t}return n.prototype.resolve=function(n,e){var t=this;return this.$api.get("/platform-tools/docker/startup-script").toPromise().catch(function(n){t.$toastr.error(n.message,"Failed to Load Startup Script"),t.$router.navigate(["/"])})},n}(),j=function(){function n(n,e,t){this.$api=n,this.$toastr=e,this.$router=t}return n.prototype.resolve=function(n,e){var t=this;return this.$api.get("/platform-tools/docker/env").toPromise().catch(function(n){t.$toastr.error(n.message,"Failed to Load Startup Script"),t.$router.navigate(["/"])})},n}(),z=t("o6Sk"),Z=t("pKmL"),q=function(){return function(){}}();t.d(e,"DockerModuleNgFactory",function(){return Y});var Y=l["\u0275cmf"](r,[],function(n){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,o.b,o.h,o.i,o.e,o.f,o.g,u.a,_,M,P]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,s.NgLocalization,s.NgLocaleLocalization,[l.LOCALE_ID,[2,s["\u0275angular_packages_common_common_a"]]]),l["\u0275mpd"](4608,c["\u0275angular_packages_forms_forms_j"],c["\u0275angular_packages_forms_forms_j"],[]),l["\u0275mpd"](4608,c.FormBuilder,c.FormBuilder,[]),l["\u0275mpd"](4608,H.v,H.v,[l.ComponentFactoryResolver,l.Injector,H.lb,H.w]),l["\u0275mpd"](4608,a.h,a.g,[]),l["\u0275mpd"](4608,a.c,a.f,[]),l["\u0275mpd"](4608,a.j,a.d,[]),l["\u0275mpd"](4608,a.b,a.a,[]),l["\u0275mpd"](4608,a.l,a.l,[a.m,a.h,a.c,a.j,a.b,a.n,a.o]),l["\u0275mpd"](4608,U,U,[p.a,h.j,i.l]),l["\u0275mpd"](4608,j,j,[p.a,h.j,i.l]),l["\u0275mpd"](1073742336,s.CommonModule,s.CommonModule,[]),l["\u0275mpd"](1073742336,c["\u0275angular_packages_forms_forms_bc"],c["\u0275angular_packages_forms_forms_bc"],[]),l["\u0275mpd"](1073742336,c.FormsModule,c.FormsModule,[]),l["\u0275mpd"](1073742336,c.ReactiveFormsModule,c.ReactiveFormsModule,[]),l["\u0275mpd"](1073742336,z.a,z.a,[]),l["\u0275mpd"](1073742336,H.c,H.c,[]),l["\u0275mpd"](1073742336,H.g,H.g,[]),l["\u0275mpd"](1073742336,H.i,H.i,[]),l["\u0275mpd"](1073742336,H.m,H.m,[]),l["\u0275mpd"](1073742336,H.n,H.n,[]),l["\u0275mpd"](1073742336,H.s,H.s,[]),l["\u0275mpd"](1073742336,H.t,H.t,[]),l["\u0275mpd"](1073742336,H.x,H.x,[]),l["\u0275mpd"](1073742336,H.B,H.B,[]),l["\u0275mpd"](1073742336,H.G,H.G,[]),l["\u0275mpd"](1073742336,H.J,H.J,[]),l["\u0275mpd"](1073742336,H.O,H.O,[]),l["\u0275mpd"](1073742336,H.R,H.R,[]),l["\u0275mpd"](1073742336,H.V,H.V,[]),l["\u0275mpd"](1073742336,H.Y,H.Y,[]),l["\u0275mpd"](1073742336,H.Z,H.Z,[]),l["\u0275mpd"](1073742336,H.y,H.y,[]),l["\u0275mpd"](1073742336,a.i,a.i,[]),l["\u0275mpd"](1073742336,Z.a,Z.a,[]),l["\u0275mpd"](1073742336,i.p,i.p,[[2,i.v],[2,i.l]]),l["\u0275mpd"](1073742336,q,q,[]),l["\u0275mpd"](1073742336,r,r,[]),l["\u0275mpd"](1024,i.j,function(){return[[{path:"",redirectTo:"/",pathMatch:"full"},{path:"settings",component:g,resolve:{env:j}},{path:"startup-script",component:R,resolve:{startupScript:U}},{path:"restart-container",component:L}]]},[]),l["\u0275mpd"](256,a.o,void 0,[]),l["\u0275mpd"](256,a.n,void 0,[])])})}}]);